<!DOCTYPE html>
<html lang="fr">
<head>
	<title>deep-browser sandbox</title>
	 <meta charset="utf-8">
	 <link rel="stylesheet" type="text/css" href="style.css">
	 <!--<link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/default.min.css">
	<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>-->
	<link rel="stylesheet" href="./js/highlight/styles/github.css">
	<script src="./js/highlight/highlight.pack.js"></script>
</head>
<body>
	<h1>deep-browser sandbox</h1>

	<div>
		<button id="run-core-units">tests</button>
		<button id="run-core-units-verbose">tests (verbose)</button>
	</div>

	<div id="reports-container"></div>

	<div dp-try-sandbox class="dp-try-sandbox">
		<textarea class="dp-try-input">deep("hello").log()</textarea>
	</div>
	<pre dp-try class="code">
deep(1).log();
	</pre>
	<pre dp-try class="code">
deep([1,2,3]).log();
	</pre>
	<pre dp-try class="code">
deep([1,2,3]).query("./*").log();
	</pre>
	<pre dp-try class="code">
deep([1,2,3]).query("./0").log();
	</pre>
	<pre dp-try class="code">
deep.Collection("myprotoc", [{ id:"e1", title:"hello world" }]);
deep("myprotoc::").log();
	</pre>
	<pre dp-try class="code">
deep.Collection("myprotoc", [{ id:"e1", title:"hello world" }]);<br/>
deep("myprotoc::").query("./0").log();
	</pre>
	<pre dp-try class="code">
deep.Collection("myprotoc", [{ id:"e1", title:"hello world" }]);<br/>
deep("myprotoc::e1").log();
	</pre>

	<pre dp-try class="code">
//-----------------Models
var land = {
	location : "pls override this value with your own location",
	watering : function () {
		console.log("Water is applied on all the land");
	}
};
//-----------------Aspects
var orchard = {
	plants : [{id:"appletree",growSpeed:10}],
	watering : deep.compose.after(function () {
		console.log("We put some mulch after watering");
	})
};

var kitchenGarden = {
	plants : [{id:"carrots",growSpeed:6}],
	watering : deep.compose.before(function () {
		console.log("We protect seedlings before watering");
	})
};
//-----------------Implement

var myOwnLand = {
	location : "Sao Francisco do Guapor√©",
	plants : [{id:"grass",growSpeed:2}]
};

deep(myOwnLand)
.bottom(land)
.up(orchard,kitchenGarden)
//Query based object modelisation
.query("/plants/*")
.up({
	size : 0,
	grow : function () {
		this.size += this.growSpeed;
	},
	prune : function (heightpruned) {
		this.size -= heightpruned;
	}
});

deep(myOwnLand).log("myOwnLand is : ");
	</pre>
	<h3>Restful API usage</h3>
	<p>Simple post. The object is decorated by generated id. (you could provide yours)</p>
	<pre dp-try class="code">
deep.Collection("myprotoc", [{ id:"e1", title:"hello world" }]);
//...
deep.rest("myprotoc")
.post({ title:"new posted object title"})
.log("result posted : ")

.get()
.log("all items from collection : ");
	</pre>
	<p>Simple put. Put replaces entirely the old entry by the new one. You could loose some datas.</p>
	<pre dp-try class="code">
deep.Collection("myprotoc", [{ id:"e1", title:"hello world", amount:3 }]);
//...
deep.rest("myprotoc")
.get()
.log("all items from Collection : ")

.put({ id:"e1", title:"hello deepjs"})
.log("\nresult puted : ")

.get()
.log("\nall items from Collection : ");
	</pre>
	<p>Simple patch. Patch updates only provided properties.</p>
	<pre dp-try class="code">
deep.Collection("myprotoc", [{ id:"e1", title:"hello world", amount:3 }]);
//...
deep.rest("myprotoc")
.get()
.log("all items from Collection (before) : ")

.patch({ id:"e1", title:"hello deepjs"})
.log("\nresult puted : ")

.get()
.log("\nall items from Collection (after) : ");
	</pre>
	<script src="./js/jquery-1.7.1.min.js"></script>
    <script data-main="main" src="./js/require.js"></script>
	
</body>
</html>